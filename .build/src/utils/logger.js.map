{"version":3,"file":"logger.js","sources":["src/utils/logger.ts"],"sourceRoot":"/","sourcesContent":["import * as fs from \"fs\";\r\nimport * as path from \"path\";\r\nimport * as Sentry from \"@sentry/node\";\r\n\r\nexport enum LogLevel {\r\n  ERROR = \"ERROR\",\r\n  WARN = \"WARN\",\r\n  INFO = \"INFO\",\r\n  DEBUG = \"DEBUG\",\r\n  TRACE = \"TRACE\",\r\n}\r\n\r\nexport interface FileLoggerOptions {\r\n  dir: string;\r\n  maxFileSize?: number; // in bytes\r\n  maxFiles?: number;\r\n}\r\n\r\nexport interface LoggerOptions {\r\n  level?: LogLevel;\r\n  timestamp?: boolean;\r\n  colors?: boolean;\r\n  file?: FileLoggerOptions;\r\n}\r\n\r\nexport class Logger {\r\n  private name: string;\r\n  private options: LoggerOptions;\r\n  private currentFileStream: fs.WriteStream | null = null;\r\n  private currentFilePath: string = \"\";\r\n  private currentFileSize: number = 0;\r\n\r\n  constructor(name: string = \"app\", options: LoggerOptions = {}) {\r\n    this.name = name;\r\n    this.options = {\r\n      level: LogLevel.DEBUG,\r\n      timestamp: true,\r\n      colors: true,\r\n      ...options,\r\n    };\r\n\r\n    if (this.options.file) {\r\n      this.ensureLogDirectory();\r\n      this.createNewLogFile();\r\n    }\r\n  }\r\n\r\n  private ensureLogDirectory(): void {\r\n    if (!this.options.file) return;\r\n\r\n    try {\r\n      if (!fs.existsSync(this.options.file.dir)) {\r\n        fs.mkdirSync(this.options.file.dir, { recursive: true });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to create log directory:\", err);\r\n    }\r\n  }\r\n\r\n  private getCurrentDateString(): string {\r\n    return new Date().toISOString().split(\"T\")[0]; // YYYY-MM-DD\r\n  }\r\n\r\n  private generateFileName(): string {\r\n    const dateStr = this.getCurrentDateString();\r\n    return path.join(this.options.file!.dir, `${dateStr}_${this.name}.log`);\r\n  }\r\n\r\n  private createNewLogFile(): void {\r\n    if (!this.options.file) return;\r\n\r\n    try {\r\n      // Close previous file if exists\r\n      if (this.currentFileStream) {\r\n        this.currentFileStream.end();\r\n      }\r\n\r\n      this.currentFilePath = this.generateFileName();\r\n      this.currentFileSize = 0;\r\n\r\n      // Create new file stream\r\n      this.currentFileStream = fs.createWriteStream(this.currentFilePath, {\r\n        flags: \"a\",\r\n        encoding: \"utf8\",\r\n      });\r\n\r\n      // Write header\r\n      const header = `[${new Date().toISOString()}] [${\r\n        this.name\r\n      }] Logging started\\n`;\r\n      this.currentFileStream.write(header);\r\n      this.currentFileSize += Buffer.byteLength(header, \"utf8\");\r\n    } catch (err) {\r\n      console.error(\"Failed to create log file:\", err);\r\n      this.currentFileStream = null;\r\n    }\r\n  }\r\n\r\n  private shouldRotateFile(): boolean {\r\n    if (!this.options.file || !this.currentFileStream) return false;\r\n    return (\r\n      this.currentFileSize >=\r\n      (this.options.file.maxFileSize || 10 * 1024 * 1024)\r\n    ); // Default 10MB\r\n  }\r\n\r\n  private writeToFile(message: string): void {\r\n    if (!this.options.file || !this.currentFileStream) return;\r\n\r\n    try {\r\n      if (this.shouldRotateFile()) {\r\n        this.createNewLogFile();\r\n      }\r\n\r\n      const messageSize = Buffer.byteLength(message, \"utf8\");\r\n      this.currentFileStream.write(message + \"\\n\");\r\n      this.currentFileSize += messageSize + 1; // +1 for newline\r\n    } catch (err) {\r\n      console.error(\"Failed to write to log file:\", err);\r\n    }\r\n  }\r\n\r\n  private shouldLog(level: LogLevel): boolean {\r\n    const levels = Object.values(LogLevel);\r\n    const currentLevelIdx = levels.indexOf(this.options.level!);\r\n    const messageLevelIdx = levels.indexOf(level);\r\n    return messageLevelIdx <= currentLevelIdx;\r\n  }\r\n\r\n  private getColor(level: LogLevel): string {\r\n    if (!this.options.colors) return \"\";\r\n\r\n    const colors: Record<LogLevel, string> = {\r\n      [LogLevel.ERROR]: \"\\x1b[31m\", // red\r\n      [LogLevel.WARN]: \"\\x1b[33m\", // yellow\r\n      [LogLevel.INFO]: \"\\x1b[36m\", // cyan\r\n      [LogLevel.DEBUG]: \"\\x1b[35m\", // magenta\r\n      [LogLevel.TRACE]: \"\\x1b[32m\", // green\r\n    };\r\n\r\n    return colors[level] || \"\";\r\n  }\r\n\r\n  private resetColor(): string {\r\n    return this.options.colors ? \"\\x1b[0m\" : \"\";\r\n  }\r\n\r\n  private formatMessage(\r\n    level: LogLevel,\r\n    message: string,\r\n    ...args: any[]\r\n  ): { consoleMessage: string; fileMessage: string } {\r\n    const timestamp = this.options.timestamp\r\n      ? `[${new Date().toISOString()}] `\r\n      : \"\";\r\n    const levelStr = `[${level}]`;\r\n    const nameStr = `[${this.name}]`;\r\n\r\n    // Special handling for Error objects to include stack trace\r\n    const processedArgs = args.map((arg) => {\r\n      if (arg instanceof Error) {\r\n        return `${arg.message}\\n${arg.stack}`;\r\n      } else if (typeof arg === \"object\") {\r\n        return JSON.stringify(arg, null, 2);\r\n      }\r\n      return arg;\r\n    });\r\n\r\n    const baseMessage = `${timestamp}${levelStr}${nameStr}: ${message} ${processedArgs.join(\r\n      \" \"\r\n    )}`;\r\n\r\n    return {\r\n      consoleMessage: `${this.getColor(\r\n        level\r\n      )}${baseMessage}${this.resetColor()}`,\r\n      fileMessage: baseMessage, // No colors in file\r\n    };\r\n  }\r\n\r\n  private log(level: LogLevel, message: string, ...args: any[]): void {\r\n    if (!this.shouldLog(level)) return;\r\n\r\n    const { consoleMessage, fileMessage } = this.formatMessage(\r\n      level,\r\n      message,\r\n      ...args\r\n    );\r\n\r\n    if (level === LogLevel.ERROR) {\r\n      console.error(consoleMessage);\r\n      this.captureSentryError(message, args);\r\n    } else if (level === LogLevel.WARN) {\r\n      console.warn(consoleMessage);\r\n      this.captureSentryWarning(message, args);\r\n    } else {\r\n      console.log(consoleMessage);\r\n    }\r\n\r\n    this.writeToFile(fileMessage);\r\n  }\r\n\r\n  private captureSentryError(message: string, args: any[]): void {\r\n    const error = args.find((arg) => arg instanceof Error);\r\n    if (error) {\r\n      Sentry.captureException(error);\r\n    } else {\r\n      Sentry.captureMessage(message, {\r\n        level: \"error\",\r\n        extra: { args },\r\n      });\r\n    }\r\n  }\r\n\r\n  private captureSentryWarning(message: string, args: any[]): void {\r\n    Sentry.captureMessage(message, {\r\n      level: \"warning\",\r\n      extra: { args },\r\n    });\r\n  }\r\n\r\n  public error(message: string, ...args: any[]): void {\r\n    this.log(LogLevel.ERROR, message, ...args);\r\n  }\r\n\r\n  public warn(message: string, ...args: any[]): void {\r\n    this.log(LogLevel.WARN, message, ...args);\r\n  }\r\n\r\n  public info(message: string, ...args: any[]): void {\r\n    this.log(LogLevel.INFO, message, ...args);\r\n  }\r\n\r\n  public debug(message: string, ...args: any[]): void {\r\n    this.log(LogLevel.DEBUG, message, ...args);\r\n  }\r\n\r\n  public trace(message: string, ...args: any[]): void {\r\n    this.log(LogLevel.TRACE, message, ...args);\r\n  }\r\n\r\n  public setLevel(level: LogLevel): void {\r\n    this.options.level = level;\r\n  }\r\n\r\n  public captureException(error: Error, context?: Record<string, any>): void {\r\n    if (context) {\r\n      Sentry.withScope((scope) => {\r\n        Object.entries(context).forEach(([key, value]) => {\r\n          scope.setExtra(key, value);\r\n        });\r\n        Sentry.captureException(error);\r\n      });\r\n    } else {\r\n      Sentry.captureException(error);\r\n    }\r\n\r\n    // Also log locally\r\n    this.error(\"Captured exception:\", error);\r\n  }\r\n\r\n  public close(): void {\r\n    if (this.currentFileStream) {\r\n      this.currentFileStream.end();\r\n      this.currentFileStream = null;\r\n    }\r\n  }\r\n}\r\n\r\nconst logger = new Logger(\"threaded\", {\r\n  colors: true,\r\n  file: {\r\n    dir: \"./logs\",\r\n  },\r\n  timestamp: true,\r\n});\r\n\r\nexport default logger;\r\n"],"names":[],"mappings":"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","debug_id":"4fff6dcb-7296-5ac6-9bcf-22134bf8106a"}