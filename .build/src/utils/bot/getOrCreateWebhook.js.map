{"version":3,"file":"getOrCreateWebhook.js","sources":["src/utils/bot/getOrCreateWebhook.ts"],"sourceRoot":"/","sourcesContent":["import { ClientUser, TextChannel } from \"discord.js\";\r\n\r\nexport async function getOrCreateWebhook(\r\n  channel: TextChannel,\r\n  clientUser: ClientUser\r\n): Promise<string> {\r\n  if (!channel.isTextBased() || channel.isDMBased())\r\n    throw new Error(\"Invalid channel type\");\r\n\r\n  const webhooks = await channel.fetchWebhooks();\r\n  const existing = webhooks.find((wh) => wh.owner?.id === clientUser.id);\r\n  if (existing) return existing.url;\r\n\r\n  // Create a new webhook if not found\r\n  return (\r\n    await channel.createWebhook({\r\n      name: clientUser.displayName,\r\n      avatar: clientUser.displayAvatarURL() || null,\r\n    })\r\n  ).url;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA,gDAkBC;AAlBM,KAAK,UAAU,kBAAkB,CACtC,OAAoB,EACpB,UAAsB;IAEtB,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,OAAO,CAAC,SAAS,EAAE;QAC/C,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;IAE1C,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,aAAa,EAAE,CAAC;IAC/C,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,KAAK,UAAU,CAAC,EAAE,CAAC,CAAC;IACvE,IAAI,QAAQ;QAAE,OAAO,QAAQ,CAAC,GAAG,CAAC;IAElC,oCAAoC;IACpC,OAAO,CACL,MAAM,OAAO,CAAC,aAAa,CAAC;QAC1B,IAAI,EAAE,UAAU,CAAC,WAAW;QAC5B,MAAM,EAAE,UAAU,CAAC,gBAAgB,EAAE,IAAI,IAAI;KAC9C,CAAC,CACH,CAAC,GAAG,CAAC;AACR,CAAC","debug_id":"4140c62c-b6d6-5b74-a8df-d1de83896d84"}