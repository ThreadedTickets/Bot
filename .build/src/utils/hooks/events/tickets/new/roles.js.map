{"version":3,"file":"roles.js","sources":["src/utils/hooks/events/tickets/new/roles.ts"],"sourceRoot":"/","sourcesContent":["import { Client, Guild, Interaction, Message, User } from \"discord.js\";\nimport { registerHook } from \"../../..\";\nimport { getGuildMember } from \"../../../../bot/getGuildMember\";\nimport { TicketFormResponse, TicketTrigger } from \"../../../../../types/Ticket\";\nimport { Locale } from \"../../../../../types/Locale\";\nimport { updateMemberRoles } from \"../../applications/end/roles\";\n\nregisterHook(\n  \"TicketCreate\",\n  async ({\n    trigger,\n    guild,\n    owner,\n    responses,\n    messageOrInteraction,\n    client,\n    lang,\n    user,\n  }: {\n    client: Client;\n    trigger: TicketTrigger;\n    guild: Guild;\n    responses: TicketFormResponse[];\n    owner: string;\n    messageOrInteraction: Message | Interaction;\n    lang: Locale;\n    user: User;\n  }) => {\n    const { addRolesOnOpen, removeRolesOnOpen } = trigger;\n    const member = await getGuildMember(client, guild.id, owner);\n    if (!member) return;\n\n    await updateMemberRoles(\n      client,\n      member,\n      addRolesOnOpen ?? [],\n      removeRolesOnOpen ?? []\n    );\n  }\n);\n"],"names":[],"mappings":";;;;AACA,gCAAwC;AACxC,mEAAgE;AAGhE,wDAAiE;AAEjE,IAAA,gBAAY,EACV,cAAc,EACd,KAAK,EAAE,EACL,OAAO,EACP,KAAK,EACL,KAAK,EACL,SAAS,EACT,oBAAoB,EACpB,MAAM,EACN,IAAI,EACJ,IAAI,GAUL,EAAE,EAAE;IACH,MAAM,EAAE,cAAc,EAAE,iBAAiB,EAAE,GAAG,OAAO,CAAC;IACtD,MAAM,MAAM,GAAG,MAAM,IAAA,+BAAc,EAAC,MAAM,EAAE,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;IAC7D,IAAI,CAAC,MAAM;QAAE,OAAO;IAEpB,MAAM,IAAA,yBAAiB,EACrB,MAAM,EACN,MAAM,EACN,cAAc,IAAI,EAAE,EACpB,iBAAiB,IAAI,EAAE,CACxB,CAAC;AACJ,CAAC,CACF,CAAC","debug_id":"018e2270-1894-5b88-88b7-e21d89dbcb49"}