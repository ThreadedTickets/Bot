{"version":3,"file":"paginateWithButtons.js","sources":["src/utils/paginateWithButtons.ts"],"sourceRoot":"/","sourcesContent":["import {\n  ButtonBuilder,\n  ButtonStyle,\n  ActionRowBuilder,\n  ComponentType,\n  Message,\n  MessageEditOptions,\n  ButtonInteraction,\n  ChatInputCommandInteraction,\n} from \"discord.js\";\n\n/**\n * Accepts a replyable (CommandInteraction or Message) and a list of paginated message edit options,\n * and presents button-based pagination to the user.\n */\nexport async function paginateWithButtons(\n  ownerId: string,\n  target: ButtonInteraction | ChatInputCommandInteraction | Message,\n  pages: MessageEditOptions[],\n  timeoutMs: number = 60_000\n): Promise<void> {\n  if (pages.length === 0) return;\n\n  let currentPage = 0;\n\n  const buildComponents = () =>\n    new ActionRowBuilder<ButtonBuilder>().addComponents(\n      new ButtonBuilder()\n        .setCustomId(\"first\")\n        .setEmoji(\"⏪\")\n        .setStyle(ButtonStyle.Secondary)\n        .setDisabled(currentPage === 0),\n      new ButtonBuilder()\n        .setCustomId(\"prev\")\n        .setEmoji(\"◀\")\n        .setStyle(ButtonStyle.Primary)\n        .setDisabled(currentPage === 0),\n      new ButtonBuilder()\n        .setCustomId(\"cancel\")\n        .setEmoji(\"❌\")\n        .setStyle(ButtonStyle.Danger),\n      new ButtonBuilder()\n        .setCustomId(\"next\")\n        .setEmoji(\"▶\")\n        .setStyle(ButtonStyle.Primary)\n        .setDisabled(currentPage === pages.length - 1),\n      new ButtonBuilder()\n        .setCustomId(\"last\")\n        .setEmoji(\"⏩\")\n        .setStyle(ButtonStyle.Secondary)\n        .setDisabled(currentPage === pages.length - 1)\n    );\n\n  const applyPage = (index: number): MessageEditOptions => ({\n    ...pages[index],\n    components: [buildComponents()],\n  });\n\n  const message =\n    \"editReply\" in target\n      ? await target.editReply(applyPage(currentPage))\n      : await target.edit(applyPage(currentPage));\n\n  const collector = message.createMessageComponentCollector({\n    componentType: ComponentType.Button,\n    time: timeoutMs,\n    filter: (i: ButtonInteraction) => i.user.id === ownerId,\n  });\n\n  collector.on(\"collect\", async (interaction) => {\n    switch (interaction.customId) {\n      case \"first\":\n        currentPage = 0;\n        break;\n      case \"prev\":\n        currentPage = Math.max(0, currentPage - 1);\n        break;\n      case \"next\":\n        currentPage = Math.min(pages.length - 1, currentPage + 1);\n        break;\n      case \"last\":\n        currentPage = pages.length - 1;\n        break;\n      case \"cancel\":\n        collector.stop(\"cancelled\");\n        await interaction.update({ components: [] });\n        return;\n    }\n\n    await interaction.update(applyPage(currentPage));\n  });\n\n  collector.on(\"end\", async (_, reason) => {\n    if (reason !== \"cancelled\") {\n      await message.edit({ components: [] }).catch(() => {});\n    }\n  });\n}\n"],"names":[],"mappings":"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","debug_id":"379f9349-bd6c-5239-a094-c035ca2d343d"}