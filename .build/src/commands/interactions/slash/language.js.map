{"version":3,"file":"language.js","sources":["src/commands/interactions/slash/language.ts"],"sourceRoot":"/","sourcesContent":["import {\n  InteractionContextType,\n  MessageFlags,\n  PermissionFlagsBits,\n  SlashCommandBuilder,\n} from \"discord.js\";\nimport { AppCommand } from \"../../../types/Command\";\nimport { setServerLocale } from \"../../../utils/bot/getServer\";\nimport { t } from \"../../../lang\";\nimport { supportedLocales } from \"../../../constants/locales\";\nimport { Locale } from \"../../../types/Locale\";\nconst localeMap = supportedLocales as Record<\n  string,\n  { name: string; emoji: string }\n>;\nconst languages = Object.keys(localeMap).map((k) => ({\n  name: `${localeMap[k].emoji} ${localeMap[k].name}`,\n  value: k,\n}));\n\nconst command: AppCommand = {\n  type: \"slash\",\n  data: new SlashCommandBuilder()\n    .setName(\"language\")\n    .setDescription(\"Set the preferred language for your server\")\n    .setDefaultMemberPermissions(PermissionFlagsBits.Administrator)\n    .setContexts(InteractionContextType.Guild)\n    .setNameLocalizations({})\n    .setDescriptionLocalizations({})\n    .addStringOption((opt) =>\n      opt\n        .setName(\"value\")\n        .setDescription(\"Chose a supported language\")\n        .setRequired(true)\n        .setNameLocalizations({})\n        .setDescriptionLocalizations({})\n        .addChoices(languages)\n    ),\n\n  async execute(client, data, interaction) {\n    if (!interaction.guildId) return;\n\n    const newLanguage = interaction.options.getString(\"value\", true);\n    setServerLocale(interaction.guildId, newLanguage as Locale);\n\n    interaction.reply({\n      flags: [MessageFlags.Ephemeral],\n      content: t(newLanguage, \"LANGUAGE_UPDATED\", {\n        new_language: localeMap[newLanguage].name,\n      }),\n    });\n  },\n};\n\nexport default command;\n"],"names":[],"mappings":";;;;AAAA,2CAKoB;AAEpB,4DAA+D;AAC/D,wCAAkC;AAClC,wDAA8D;AAE9D,MAAM,SAAS,GAAG,0BAGjB,CAAC;AACF,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACnD,IAAI,EAAE,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;IAClD,KAAK,EAAE,CAAC;CACT,CAAC,CAAC,CAAC;AAEJ,MAAM,OAAO,GAAe;IAC1B,IAAI,EAAE,OAAO;IACb,IAAI,EAAE,IAAI,gCAAmB,EAAE;SAC5B,OAAO,CAAC,UAAU,CAAC;SACnB,cAAc,CAAC,4CAA4C,CAAC;SAC5D,2BAA2B,CAAC,gCAAmB,CAAC,aAAa,CAAC;SAC9D,WAAW,CAAC,mCAAsB,CAAC,KAAK,CAAC;SACzC,oBAAoB,CAAC,EAAE,CAAC;SACxB,2BAA2B,CAAC,EAAE,CAAC;SAC/B,eAAe,CAAC,CAAC,GAAG,EAAE,EAAE,CACvB,GAAG;SACA,OAAO,CAAC,OAAO,CAAC;SAChB,cAAc,CAAC,4BAA4B,CAAC;SAC5C,WAAW,CAAC,IAAI,CAAC;SACjB,oBAAoB,CAAC,EAAE,CAAC;SACxB,2BAA2B,CAAC,EAAE,CAAC;SAC/B,UAAU,CAAC,SAAS,CAAC,CACzB;IAEH,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,WAAW;QACrC,IAAI,CAAC,WAAW,CAAC,OAAO;YAAE,OAAO;QAEjC,MAAM,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACjE,IAAA,2BAAe,EAAC,WAAW,CAAC,OAAO,EAAE,WAAqB,CAAC,CAAC;QAE5D,WAAW,CAAC,KAAK,CAAC;YAChB,KAAK,EAAE,CAAC,yBAAY,CAAC,SAAS,CAAC;YAC/B,OAAO,EAAE,IAAA,QAAC,EAAC,WAAW,EAAE,kBAAkB,EAAE;gBAC1C,YAAY,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC,IAAI;aAC1C,CAAC;SACH,CAAC,CAAC;IACL,CAAC;CACF,CAAC;AAEF,kBAAe,OAAO,CAAC","debug_id":"a33978f4-a1ce-5df3-8c97-d252c53ae736"}