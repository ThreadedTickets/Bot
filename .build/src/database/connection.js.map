{"version":3,"file":"connection.js","sources":["src/database/connection.ts"],"sourceRoot":"/","sourcesContent":["import mongoose from \"mongoose\";\r\nimport logger from \"../utils/logger\";\r\n\r\nexport const connectToMongooseDatabase = async () => {\r\n  if (!process.env[\"MONGOOSE_URI\"]) {\r\n    logger.error(\r\n      \"To connect to the database you must provide a connection URI, username and password\"\r\n    );\r\n    process.exit(1);\r\n  }\r\n\r\n  try {\r\n    const databaseClient = await mongoose.connect(\r\n      process.env[\"MONGOOSE_URI\"] ?? \"\"\r\n    );\r\n    databaseClient.connection.useDb(\"ThreadedTs\");\r\n\r\n    logger.info(\r\n      `Connected to the database ${databaseClient.connection.db?.namespace} successfully`\r\n    );\r\n  } catch (err) {\r\n    logger.error(\"Failed to connect to database:\", err);\r\n    process.exit(1);\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAA,wDAAgC;AAChC,6DAAqC;AAE9B,MAAM,yBAAyB,GAAG,KAAK,IAAI,EAAE;IAClD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC;QACjC,gBAAM,CAAC,KAAK,CACV,qFAAqF,CACtF,CAAC;QACF,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,IAAI,CAAC;QACH,MAAM,cAAc,GAAG,MAAM,kBAAQ,CAAC,OAAO,CAC3C,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE,CAClC,CAAC;QACF,cAAc,CAAC,UAAU,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QAE9C,gBAAM,CAAC,IAAI,CACT,6BAA6B,cAAc,CAAC,UAAU,CAAC,EAAE,EAAE,SAAS,eAAe,CACpF,CAAC;IACJ,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACb,gBAAM,CAAC,KAAK,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;QACpD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;AACH,CAAC,CAAC;AArBW,QAAA,yBAAyB,6BAqBpC","debug_id":"961b68fd-186a-56f4-a084-66184d5250eb"}