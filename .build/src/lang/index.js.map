{"version":3,"file":"index.js","sources":["src/lang/index.ts"],"sourceRoot":"/","sourcesContent":["import path from \"path\";\nimport fs from \"fs\";\nimport logger from \"../utils/logger\";\n\n// Type-safe language cache\ntype Messages = Record<string, string>;\nconst languages: Record<string, Messages> = {};\n\n// Load all language files into memory\nexport function loadLanguages() {\n  const langDir = path.join(__dirname);\n  const locales = fs.readdirSync(langDir, { withFileTypes: true });\n\n  for (const locale of locales) {\n    if (!locale.isDirectory()) continue;\n\n    const messagesPath = path.join(langDir, locale.name, \"messages.js\");\n    if (!fs.existsSync(messagesPath)) continue;\n\n    languages[locale.name] = require(messagesPath).lang;\n    logger.info(`Loaded locale ${locale.name}`);\n  }\n}\n\n// Get a localized string with placeholder replacement\nexport function t(\n  locale: string,\n  key: string,\n  variables: Record<string, string | number> = {}\n): string {\n  const messages = languages[locale] || languages[\"en\"];\n  let template = messages[key] || key;\n\n  for (const [placeholder, value] of Object.entries(variables)) {\n    const pattern = new RegExp(`{${placeholder}}`, \"g\");\n    template = template.replace(pattern, String(value));\n  }\n\n  return template;\n}\n"],"names":[],"mappings":";;;;;;;AASA,sCAaC;AAGD,cAcC;AAvCD,gDAAwB;AACxB,4CAAoB;AACpB,6DAAqC;AAIrC,MAAM,SAAS,GAA6B,EAAE,CAAC;AAE/C,sCAAsC;AACtC,SAAgB,aAAa;IAC3B,MAAM,OAAO,GAAG,cAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACrC,MAAM,OAAO,GAAG,YAAE,CAAC,WAAW,CAAC,OAAO,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IAEjE,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;QAC7B,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;YAAE,SAAS;QAEpC,MAAM,YAAY,GAAG,cAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;QACpE,IAAI,CAAC,YAAE,CAAC,UAAU,CAAC,YAAY,CAAC;YAAE,SAAS;QAE3C,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC;QACpD,gBAAM,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;IAC9C,CAAC;AACH,CAAC;AAED,sDAAsD;AACtD,SAAgB,CAAC,CACf,MAAc,EACd,GAAW,EACX,YAA6C,EAAE;IAE/C,MAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;IACtD,IAAI,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC;IAEpC,KAAK,MAAM,CAAC,WAAW,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;QAC7D,MAAM,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,WAAW,GAAG,EAAE,GAAG,CAAC,CAAC;QACpD,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACtD,CAAC;IAED,OAAO,QAAQ,CAAC;AAClB,CAAC","debug_id":"fd66201e-1c16-5c02-bfd4-1fd41689afb0"}