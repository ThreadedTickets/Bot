{"version":3,"file":"ticketReplyAwait.js","sources":["src/events/ticketReplyAwait.ts"],"sourceRoot":"/","sourcesContent":["import { TaskScheduler } from \"..\";\nimport { Event } from \"../types/Event\";\nimport { TicketChannelManager } from \"../utils/bot/TicketChannelManager\";\nimport logger from \"../utils/logger\";\n\nconst event: Event<\"messageCreate\"> = {\n  name: \"messageCreate\",\n  once: false,\n  async execute(client, data, message) {\n    if (!message.guildId) return;\n    if (message.flags.has(\"Ephemeral\")) return;\n\n    const ticket = await new TicketChannelManager().getTicket(\n      message.channelId\n    );\n    if (!ticket) return;\n    if (message.author.id !== ticket.owner) return;\n\n    const exists = await TaskScheduler.taskExists(\n      `AWAIT-${ticket.ticketId}`,\n      true\n    );\n    if (exists) {\n      logger.debug(\"Canceling await task\");\n      TaskScheduler.removeTask(`AWAIT-${ticket.ticketId}`);\n      if (exists.params.notify)\n        message.reply({\n          content: `<@${exists.params.notify}>\\n-# Task canceled`,\n          allowedMentions: { users: [exists.params.notify] },\n        });\n      else message.react(\"ðŸ‘€\");\n    }\n  },\n};\n\nexport default event;\n"],"names":[],"mappings":";;;;;;;AAAA,0BAAmC;AAEnC,4EAAyE;AACzE,6DAAqC;AAErC,MAAM,KAAK,GAA2B;IACpC,IAAI,EAAE,eAAe;IACrB,IAAI,EAAE,KAAK;IACX,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO;QACjC,IAAI,CAAC,OAAO,CAAC,OAAO;YAAE,OAAO;QAC7B,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC;YAAE,OAAO;QAE3C,MAAM,MAAM,GAAG,MAAM,IAAI,2CAAoB,EAAE,CAAC,SAAS,CACvD,OAAO,CAAC,SAAS,CAClB,CAAC;QACF,IAAI,CAAC,MAAM;YAAE,OAAO;QACpB,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,MAAM,CAAC,KAAK;YAAE,OAAO;QAE/C,MAAM,MAAM,GAAG,MAAM,iBAAa,CAAC,UAAU,CAC3C,SAAS,MAAM,CAAC,QAAQ,EAAE,EAC1B,IAAI,CACL,CAAC;QACF,IAAI,MAAM,EAAE,CAAC;YACX,gBAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;YACrC,iBAAa,CAAC,UAAU,CAAC,SAAS,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM;gBACtB,OAAO,CAAC,KAAK,CAAC;oBACZ,OAAO,EAAE,KAAK,MAAM,CAAC,MAAM,CAAC,MAAM,qBAAqB;oBACvD,eAAe,EAAE,EAAE,KAAK,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;iBACnD,CAAC,CAAC;;gBACA,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC3B,CAAC;IACH,CAAC;CACF,CAAC;AAEF,kBAAe,KAAK,CAAC","debug_id":"03048be6-eff3-5c71-af03-1cc3c57c72de"}