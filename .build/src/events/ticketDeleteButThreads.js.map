{"version":3,"file":"ticketDeleteButThreads.js","sources":["src/events/ticketDeleteButThreads.ts"],"sourceRoot":"/","sourcesContent":["import { Event } from \"../types/Event\";\nimport { TicketChannelManager } from \"../utils/bot/TicketChannelManager\";\nimport logger from \"../utils/logger\";\nimport { closeTicket } from \"../utils/tickets/close\";\n\nconst event: Event<\"threadDelete\"> = {\n  name: \"threadDelete\",\n  async execute(client, data, channel) {\n    const isTicketChannel = await new TicketChannelManager().isTicketChannel(\n      channel.id\n    );\n    if (!isTicketChannel) return;\n\n    const ticket = await new TicketChannelManager().getTicketId(channel.id);\n\n    logger.debug(`Thread ${channel.id} deleted, closing ticket ${ticket}`);\n    closeTicket(ticket!, data?.lang ?? \"en\");\n  },\n};\n\nexport default event;\n"],"names":[],"mappings":";;;;;;;AACA,4EAAyE;AACzE,6DAAqC;AACrC,kDAAqD;AAErD,MAAM,KAAK,GAA0B;IACnC,IAAI,EAAE,cAAc;IACpB,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO;QACjC,MAAM,eAAe,GAAG,MAAM,IAAI,2CAAoB,EAAE,CAAC,eAAe,CACtE,OAAO,CAAC,EAAE,CACX,CAAC;QACF,IAAI,CAAC,eAAe;YAAE,OAAO;QAE7B,MAAM,MAAM,GAAG,MAAM,IAAI,2CAAoB,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAExE,gBAAM,CAAC,KAAK,CAAC,UAAU,OAAO,CAAC,EAAE,4BAA4B,MAAM,EAAE,CAAC,CAAC;QACvE,IAAA,mBAAW,EAAC,MAAO,EAAE,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC,CAAC;IAC3C,CAAC;CACF,CAAC;AAEF,kBAAe,KAAK,CAAC","debug_id":"f5e9fc0a-03c8-58c7-b44e-43953d797c97"}