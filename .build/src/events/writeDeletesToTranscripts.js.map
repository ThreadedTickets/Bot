{"version":3,"file":"writeDeletesToTranscripts.js","sources":["src/events/writeDeletesToTranscripts.ts"],"sourceRoot":"/","sourcesContent":["import { Event } from \"../types/Event\";\nimport { TicketChannelManager } from \"../utils/bot/TicketChannelManager\";\nimport { transcriptWriterManager } from \"../utils/tickets/TranscriptManager\";\n\nconst event: Event<\"messageDelete\"> = {\n  name: \"messageDelete\",\n  async execute(client, data, message) {\n    if (!message.guildId) return;\n    if (message.flags.has(\"Ephemeral\")) return;\n\n    const ticket = await new TicketChannelManager().getTicket(\n      message.channelId\n    );\n    if (!ticket?.takeTranscript) return;\n\n    const writer = transcriptWriterManager.get(\n      ticket.ticketId,\n      ticket.anonymise\n    );\n    message.content = \"MESSAGE DELETED\";\n    message.embeds = [];\n    message.type = null;\n    writer.editMessage(message.id, message);\n  },\n};\n\nexport default event;\n"],"names":[],"mappings":";;;;AACA,4EAAyE;AACzE,0EAA6E;AAE7E,MAAM,KAAK,GAA2B;IACpC,IAAI,EAAE,eAAe;IACrB,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO;QACjC,IAAI,CAAC,OAAO,CAAC,OAAO;YAAE,OAAO;QAC7B,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC;YAAE,OAAO;QAE3C,MAAM,MAAM,GAAG,MAAM,IAAI,2CAAoB,EAAE,CAAC,SAAS,CACvD,OAAO,CAAC,SAAS,CAClB,CAAC;QACF,IAAI,CAAC,MAAM,EAAE,cAAc;YAAE,OAAO;QAEpC,MAAM,MAAM,GAAG,2CAAuB,CAAC,GAAG,CACxC,MAAM,CAAC,QAAQ,EACf,MAAM,CAAC,SAAS,CACjB,CAAC;QACF,OAAO,CAAC,OAAO,GAAG,iBAAiB,CAAC;QACpC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;QACpB,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;QACpB,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;CACF,CAAC;AAEF,kBAAe,KAAK,CAAC","debug_id":"5899b793-6867-542f-9c0e-dc21fc57b1e7"}